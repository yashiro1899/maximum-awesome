#!/usr/bin/env node
var jsbeautifier = require("js-beautify");

var result = new Buffer('');
var suffix = process.argv[2];
var beautify;

switch (suffix) {
    case "html":
        beautify = jsbeautifier.html;
        break;
    case "css":
        beautify = jsbeautifier.css;
        break;
    case "javascript":
    case "json":
        beautify = jsbeautifier.js;
        break;
    default:
        process.exit(0);
        break;
}

process.stdin.resume();
process.stdin.setEncoding('utf8');
process.stdin.on('data', function(chunk) {
    chunk = new Buffer(chunk);
    result = Buffer.concat([result, chunk]);
});
process.stdin.on('end', function(chunk) {
    result = result.toString();
    process.stdout.write(beautify(result));
});
