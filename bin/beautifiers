#!/usr/bin/env node
var jsbeautifier = require("js-beautify");

var result = new Buffer('');
var name = process.argv[2];
var suffix = name.split(".");
var beautify;

suffix = suffix[suffix.length - 1];
suffix = suffix.toLowerCase();
switch (suffix) {
case "html":
case "hjs":
    beautify = jsbeautifier.html;
    break;
case "css":
    beautify = jsbeautifier.css;
    break;
case "js":
case "json":
default:
    beautify = jsbeautifier.js;
    break;
}

process.stdin.resume();
process.stdin.setEncoding('utf8');
process.stdin.on('data', function(chunk) {
    chunk = new Buffer(chunk);
    result = Buffer.concat([result, chunk]);
});
process.stdin.on('end', function(chunk) {
    result = result.toString();
    process.stdout.write(beautify(result));
});
