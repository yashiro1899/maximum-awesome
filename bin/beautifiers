#!/usr/bin/env node
var jsbeautifier = require("js-beautify");

process.stdin.resume();
process.stdin.setEncoding('utf8');
process.stdin.on('data', function(chunk) {
    var name = process.argv[2];
    var suffix = name.split(".");
    var beautify;

    suffix = suffix[suffix.length - 1];
    suffix = suffix.toLowerCase();
    switch (suffix) {
    case "js":
    case "json":
        beautify = jsbeautifier.js;
        break;
    case "css":
        beautify = jsbeautifier.css;
        break;
    case "html":
        beautify = jsbeautifier.html;
        break;
    default:
        console.log("filetype is not supported.");
        process.exit(1);
        break;
    }

    process.stdout.write(beautify(chunk));
    process.exit(0)
});
